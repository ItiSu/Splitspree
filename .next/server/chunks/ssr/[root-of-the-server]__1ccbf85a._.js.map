{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":["file:///Users/bkshmax/Desktop/SplitSpreeApp/Splitspree/src/ai/genkit.ts"],"sourcesContent":["import {genkit} from 'genkit';\nimport {googleAI} from '@genkit-ai/googleai';\n\nexport const ai = genkit({\n  plugins: [googleAI()],\n  model: 'googleai/gemini-2.0-flash',\n});\n"],"names":[],"mappings":";;;AAAA;AAAA;AACA;AAAA;;;AAEO,MAAM,KAAK,CAAA,GAAA,uIAAA,CAAA,SAAM,AAAD,EAAE;IACvB,SAAS;QAAC,CAAA,GAAA,2KAAA,CAAA,WAAQ,AAAD;KAAI;IACrB,OAAO;AACT","debugId":null}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///Users/bkshmax/Desktop/SplitSpreeApp/Splitspree/src/ai/flows/ai-chat-assistant.ts"],"sourcesContent":["'use server';\n\n/**\n * @fileOverview An AI chat assistant for bill splitting.\n *\n * - aiChatAssistant - A function that handles the chat assistant logic.\n * - AIChatAssistantInput - The input type for the aiChatAssistant function.\n * - AIChatAssistantOutput - The return type for the aiChatAssistant function.\n */\n\nimport {ai} from '@/ai/genkit';\nimport {z} from 'genkit';\n\nconst AIChatAssistantInputSchema = z.object({\n  command: z.string().describe('The command from the user.'),\n  users: z.string().describe('JSON string of all users in the session, including their IDs and names.'),\n  items: z.string().describe('JSON string of all items from all receipts, including their IDs, names, and prices.')\n});\nexport type AIChatAssistantInput = z.infer<typeof AIChatAssistantInputSchema>;\n\nconst ActionSchema = z.object({\n  type: z.enum(['SET_ITEM_ASSIGNEES', 'SET_ITEM_PRICE']),\n  payload: z.object({\n    itemId: z.string(),\n    userIds: z.array(z.string()).optional(),\n    price: z.number().optional(),\n  }),\n});\n\nconst AIChatAssistantOutputSchema = z.object({\n  response: z.string().describe('The text response from the AI chat assistant.'),\n  actionToConfirm: ActionSchema.optional().describe('An action that the user needs to confirm before it is executed.'),\n});\nexport type AIChatAssistantOutput = z.infer<typeof AIChatAssistantOutputSchema>;\n\nexport async function aiChatAssistant(input: AIChatAssistantInput): Promise<AIChatAssistantOutput> {\n  return aiChatAssistantFlow(input);\n}\n\nconst prompt = ai.definePrompt({\n  name: 'aiChatAssistantPrompt',\n  input: {schema: AIChatAssistantInputSchema},\n  output: {schema: AIChatAssistantOutputSchema},\n  prompt: `You are a powerful AI chat assistant for a bill splitting application. Your job is to help users manage receipt items, including assigning items to users and correcting item prices. You must be helpful, accurate, and handle all situations gracefully. Do not use emojis.\n\nYou have the following context:\n- Users in the session: {{{users}}}\n- Items available to be assigned (with their current prices): {{{items}}}\n\n**Your Main Tasks:**\nYou can perform two types of actions: \\`SET_ITEM_ASSIGNEES\\` and \\`SET_ITEM_PRICE\\`.\nFor any action, you MUST generate a response that is a question to the user confirming the action you are about to take.\nYou MUST populate the \\`actionToConfirm\\` field with the corresponding action object.\n\n---\n\n**1. Assigning Items to Users (\\`SET_ITEM_ASSIGNEES\\`)**\n\n*   **Goal:** Determine the final list of users an item should be assigned to.\n*   **User Commands:** \"Split the pizza with me and Jane\", \"I had the burger\", \"Everyone shared the fries\", \"Nobody had the soda.\"\n*   **Action Details:**\n    *   \\`type\\`: Must be \\`SET_ITEM_ASSIGNEES\\`.\n    *   \\`payload.itemId\\`: The ID of the item being assigned.\n    *   \\`payload.userIds\\`: An array of user IDs. This can be empty to unassign an item.\n    *   \\`payload.price\\`: This field should NOT be included for this action.\n*   **Example:**\n    *   User: \"Split the Large Pizza between me and Maria.\"\n    *   Confirmation: \"Split 'Large Pizza' between you and Maria?\"\n    -   Action: { \"type\": \"SET_ITEM_ASSIGNEES\", \"payload\": { \"itemId\": \"pizza-id\", \"userIds\": [\"your-id\", \"maria-id\"] } }\n\n---\n\n**2. Correcting Item Prices (\\`SET_ITEM_PRICE\\`)**\n\n*   **Goal:** Update the price of a specific item.\n*   **User Commands:** \"The price for the burger was actually $15.50\", \"Change the tater tots to be 2.10\", \"Correct the price of the soda to 1.99.\"\n*   **Action Details:**\n    *   \\`type\\`: Must be \\`SET_ITEM_PRICE\\`.\n    *   \\`payload.itemId\\`: The ID of the item being updated.\n    *   \\`payload.price\\`: The new numerical price for the item.\n    *   \\`payload.userIds\\`: This field should NOT be included for this action.\n*   **Example:**\n    *   User: \"The price for the burger was wrong, it should be 12.50\"\n    *   Confirmation: \"Update the price of 'Burger' to $12.50?\"\n    -   Action: { \"type\": \"SET_ITEM_PRICE\", \"payload\": { \"itemId\": \"burger-id\", \"price\": 12.50 } }\n\n---\n\n**Critical Rules & Edge Cases:**\n\n1.  **Confidence:** Only generate an \\`actionToConfirm\\` if you are confident you can perform the requested action. In all other cases, provide a helpful text response explaining the situation.\n\n2.  **No Items to Assign/Edit:**\n    -   **Condition:** The \\`items\\` list is empty (\\`[]\\`).\n    -   **Action:** Do NOT generate an \\`actionToConfirm\\`. Respond by telling the user they need to add items first.\n    -   **Example Response:** \"It looks like there are no items to assign or edit yet. Please upload a receipt to get started.\"\n\n3.  **Item Not Found:**\n    -   **Condition:** The user refers to an item not present in the \\`items\\` list.\n    -   **Action:** Do NOT generate an \\`actionToConfirm\\`. Ask the user to clarify which item they mean, maybe suggesting available items.\n    -   **Example Response:** \"I couldn't find an item named 'pasta'. Available items are: Burger, Fries, and Salad. Which one did you mean?\"\n\n4.  **User Not Found (for assignment):**\n    -   **Condition:** The user refers to a person not present in the \\`users\\` list when trying to assign an item.\n    -   **Action:** Do NOT generate an \\`actionToConfirm\\`. Inform the user that the person isn't in the session and list the available users.\n    -   **Example Response:** \"I couldn't find 'Mike' in the current session. The current users are: John, Jane, and Alex. Who should I assign the item to?\"\n\n5.  **Ambiguous or Incomplete Commands:**\n    -   **Condition:** The user's command is vague (e.g., \"split that\", \"change the price\", \"assign the burger\" without specifying who).\n    -   **Action:** Do NOT generate an \\`actionToConfirm\\`. Ask for the missing information.\n    -   **Example Response (for \"assign the burger\"):** \"Who should I assign the 'Burger' to?\"\n    -   **Example Response (for \"change the price\"):** \"Which item's price should I change, and what should the new price be?\"\n\n6.  **General Questions/Conversation:**\n    -   **Condition:** The user asks a question or makes a statement not related to item assignment or price correction.\n    -   **Action:** Do NOT generate an \\`actionToConfirm\\`. Provide a polite, general response.\n    -   **Example Response:** \"I can help with splitting receipt items and correcting prices. How can I assist you?\"\n\n\nNow, respond to the following command, paying close attention to all the rules above:\n{{{command}}}\n`,\n});\n\nconst aiChatAssistantFlow = ai.defineFlow(\n  {\n    name: 'aiChatAssistantFlow',\n    inputSchema: AIChatAssistantInputSchema,\n    outputSchema: AIChatAssistantOutputSchema,\n  },\n  async input => {\n    const {output} = await prompt(input);\n    return output!;\n  }\n);\n"],"names":[],"mappings":";;;;;AAEA;;;;;;CAMC,GAED;AACA;AAAA;;;;;;AAEA,MAAM,6BAA6B,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC1C,SAAS,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC7B,OAAO,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC3B,OAAO,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;AAC7B;AAGA,MAAM,eAAe,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC5B,MAAM,uIAAA,CAAA,IAAC,CAAC,IAAI,CAAC;QAAC;QAAsB;KAAiB;IACrD,SAAS,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QAChB,QAAQ,uIAAA,CAAA,IAAC,CAAC,MAAM;QAChB,SAAS,uIAAA,CAAA,IAAC,CAAC,KAAK,CAAC,uIAAA,CAAA,IAAC,CAAC,MAAM,IAAI,QAAQ;QACrC,OAAO,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IAC5B;AACF;AAEA,MAAM,8BAA8B,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC3C,UAAU,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC9B,iBAAiB,aAAa,QAAQ,GAAG,QAAQ,CAAC;AACpD;AAGO,eAAe,gBAAgB,KAA2B;IAC/D,OAAO,oBAAoB;AAC7B;AAEA,MAAM,SAAS,mHAAA,CAAA,KAAE,CAAC,YAAY,CAAC;IAC7B,MAAM;IACN,OAAO;QAAC,QAAQ;IAA0B;IAC1C,QAAQ;QAAC,QAAQ;IAA2B;IAC5C,QAAQ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EX,CAAC;AACD;AAEA,MAAM,sBAAsB,mHAAA,CAAA,KAAE,CAAC,UAAU,CACvC;IACE,MAAM;IACN,aAAa;IACb,cAAc;AAChB,GACA,OAAM;IACJ,MAAM,EAAC,MAAM,EAAC,GAAG,MAAM,OAAO;IAC9B,OAAO;AACT;;;IAlGoB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 385, "column": 0}, "map": {"version":3,"sources":["file:///Users/bkshmax/Desktop/SplitSpreeApp/Splitspree/src/ai/flows/parse-receipt.ts"],"sourcesContent":["// src/ai/flows/parse-receipt.ts\n'use server';\n\n/**\n * @fileOverview This file defines a Genkit flow for parsing receipt images and extracting data.\n *\n * - parseReceipt - A function that takes a receipt image as input and returns the extracted data.\n * - ParseReceiptInput - The input type for the parseReceipt function.\n * - ParseReceiptOutput - The return type for the parseReceipt function.\n */\n\nimport {ai} from '@/ai/genkit';\nimport {z} from 'genkit';\n\nconst ParseReceiptInputSchema = z.object({\n  receiptDataUri: z\n    .string()\n    .describe(\n      \"A receipt image, as a data URI that must include a MIME type and use Base64 encoding. Expected format: 'data:<mimetype>;base64,<encoded_data>'.\"\n    ),\n});\nexport type ParseReceiptInput = z.infer<typeof ParseReceiptInputSchema>;\n\nconst ParseReceiptOutputSchema = z.object({\n  storeName: z.string().describe('The name of the store.'),\n  date: z.string().describe('The date on the receipt.'),\n  items: z\n    .array(\n      z.object({\n        name: z.string().describe('The name of the item.'),\n        price: z.number().describe('The total price of the item, accounting for quantity.'),\n        description: z.string().describe('A clarified, common name for the item. If the item has quantity/unit details, include them. E.g., \"Snack Bars ($1.50 each x 3)\" or \"Avocados ($0.99 per lb x 2.5)\".'),\n      })\n    )\n    .describe('A list of items on the receipt.'),\n  subtotal: z.number().describe('The subtotal of the receipt.'),\n  tax: z.number().describe('The tax amount on the receipt.'),\n  tip: z.number().describe('The tip amount on the receipt.'),\n  total: z.number().describe('The total amount on the receipt.'),\n});\nexport type ParseReceiptOutput = z.infer<typeof ParseReceiptOutputSchema>;\n\nexport async function parseReceipt(input: ParseReceiptInput): Promise<ParseReceiptOutput> {\n  return parseReceiptFlow(input);\n}\n\nconst parseReceiptPrompt = ai.definePrompt({\n  name: 'parseReceiptPrompt',\n  input: {schema: ParseReceiptInputSchema},\n  output: {schema: ParseReceiptOutputSchema},\n  prompt: `You are an expert receipt parser. First, verify the image is actually a receipt. If it's not a receipt, respond with \"NOT_A_RECEIPT\". Otherwise, extract information with the highest accuracy.\n\n**Pricing Rules:**\n- For each line item, you MUST extract the final total price for that item.\n- If an item lists a quantity and a price-per-unit (e.g., \"3 @ $0.70\"), you MUST calculate the total price (e.g., $2.10). Do not use the unit price as the final price.\n- If a line only shows a single price, use that as the total price for the item.\n\n**Item Description Rules:**\n- For each item, you must provide a 'description'.\n- The description should be a clarified, common name for the item based on the receipt name.\n- If the item name on the receipt is cryptic or abbreviated (e.g., \"HRI CL CHS\"), use your knowledge to provide a more common name (e.g., \"Hillshire Farm Cheddar Cheese\").\n- If the name is already clear and common (e.g., \"Apple\"), just repeat the name for the description.\n- **Important - Handling Quantity and Unit Price:**\n  - If a line item includes details about quantity and unit price, you MUST include this in the description.\n  - **Items by Count:** For items sold by discrete units, use the format \"($<unit_price> each x <quantity>)\". Example: For \"3 SNACK BARS @ $1.50\", the description should include \"($1.50 each x 3)\".\n  - **Items by Weight/Volume:** For items sold by weight (e.g., lb, kg, oz) or volume, use the format \"($<unit_price> per <unit> x <quantity>)\". Example: For \"2.5 lb BANANAS @ $0.50/LB\", the description should include \"($0.50 per lb x 2.5)\".\n- If there is no quantity information, just provide the clarified item name.\n- Your description MUST be confident and MUST NOT end with a question mark.\n\nReceipt Image: {{media url=receiptDataUri}}\n\nReturn the data in JSON format, adhering strictly to the rules above.\n`,\n});\n\nconst parseReceiptFlow = ai.defineFlow(\n  {\n    name: 'parseReceiptFlow',\n    inputSchema: ParseReceiptInputSchema,\n    outputSchema: ParseReceiptOutputSchema,\n  },\n  async input => {\n    const {output} = await parseReceiptPrompt(input);\n    \n    if (typeof output === 'string' && output === 'NOT_A_RECEIPT') {\n      throw new Error('The uploaded image is not a receipt. Please upload a clear photo of a receipt.');\n    }\n    \n    return output!;\n  }\n);\n"],"names":[],"mappings":"AAAA,gCAAgC;;;;;;AAGhC;;;;;;CAMC,GAED;AACA;AAAA;;;;;;AAEA,MAAM,0BAA0B,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACvC,gBAAgB,uIAAA,CAAA,IAAC,CACd,MAAM,GACN,QAAQ,CACP;AAEN;AAGA,MAAM,2BAA2B,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACxC,WAAW,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC/B,MAAM,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC1B,OAAO,uIAAA,CAAA,IAAC,CACL,KAAK,CACJ,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACP,MAAM,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QAC1B,OAAO,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QAC3B,aAAa,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IACnC,IAED,QAAQ,CAAC;IACZ,UAAU,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC9B,KAAK,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IACzB,KAAK,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IACzB,OAAO,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;AAC7B;AAGO,eAAe,aAAa,KAAwB;IACzD,OAAO,iBAAiB;AAC1B;AAEA,MAAM,qBAAqB,mHAAA,CAAA,KAAE,CAAC,YAAY,CAAC;IACzC,MAAM;IACN,OAAO;QAAC,QAAQ;IAAuB;IACvC,QAAQ;QAAC,QAAQ;IAAwB;IACzC,QAAQ,CAAC;;;;;;;;;;;;;;;;;;;;;;AAsBX,CAAC;AACD;AAEA,MAAM,mBAAmB,mHAAA,CAAA,KAAE,CAAC,UAAU,CACpC;IACE,MAAM;IACN,aAAa;IACb,cAAc;AAChB,GACA,OAAM;IACJ,MAAM,EAAC,MAAM,EAAC,GAAG,MAAM,mBAAmB;IAE1C,IAAI,OAAO,WAAW,YAAY,WAAW,iBAAiB;QAC5D,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO;AACT;;;IA/CoB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 478, "column": 0}, "map": {"version":3,"sources":["file:///Users/bkshmax/Desktop/SplitSpreeApp/Splitspree/.next-internal/server/app/app/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {aiChatAssistant as '40b6d00e0f7bce7064d70ac119c32694599d3ddffb'} from 'ACTIONS_MODULE0'\nexport {parseReceipt as '40ba6bf6c5326ccdcfde81d6d5302e056e949c364c'} from 'ACTIONS_MODULE1'\n"],"names":[],"mappings":";AAAA;AACA","debugId":null}},
    {"offset": {"line": 530, "column": 0}, "map": {"version":3,"sources":["file:///Users/bkshmax/Desktop/SplitSpreeApp/Splitspree/src/app/app/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/app/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/app/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAwR,GACrT,sDACA","debugId":null}},
    {"offset": {"line": 544, "column": 0}, "map": {"version":3,"sources":["file:///Users/bkshmax/Desktop/SplitSpreeApp/Splitspree/src/app/app/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/app/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/app/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAoQ,GACjS,kCACA","debugId":null}},
    {"offset": {"line": 558, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}